
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="jumbotron text-center">
    <h1>Alta</h1>
</div>

<div class="container">
    <div class="row">
        <!--Columna 1-->
        <div class="col-sm-4">
            <!--Usuario-->
            <div class="form-group">
                <label for="usr">Usuario:</label>
                <input type="text" class="form-control" id="txtUsuario">
            </div>
            <!--Nombre-->
            <div class="form-group">
                <label for="usr">Nombre:</label>
                <input type="text" class="form-control" id="txtNombre">
            </div>

            <!--Fecah de nacimiento-->
            <div class="form-group">
                <label for="usr">Fecha de nacimiento:</label>
                <input type="date" class="form-control" id="txtFechaNacimiento">
            </div>
        </div>

        <!--Columna 2-->
        <div class="col-sm-4">
            <!--Contraseña-->
            <div class="form-group">
                <label for="usr">Contraseña:</label>
                <input type="password" class="form-control" id="txtContasena">
            </div>

            <!--Paterno-->
            <div class="form-group">
                <label for="usr">Apellido paterno:</label>
                <input type="text" class="form-control" id="txtAPaterno">
            </div>

            <!--RFC-->
            <div class="form-group">
                <label for="usr">RFC:</label>
                <input type="text" class="form-control" id="txtRFC">
            </div>
        </div>

        <!--Columna 3-->
        <div class="col-sm-4">
            <!--Clave promotor-->
            <div class="form-group">
                <label for="usr">Clave promotor:</label>
                <input type="text" class="form-control" id="txtClavePromotor">
            </div>

            <!--Materno-->
            <div class="form-group">
                <label for="usr">Apellido materno:</label>
                <input type="text" class="form-control" id="txtAMaterno">
            </div>

            <!--Promotor-->
            <div class="form-group">
               <label for="usr">Gerente promotor:</label>
                <select id="dllPromotores" class="js-example-basic-multiple" data-width="100%">

                </select>
            </div>
        </div>

        <!--Columna 4-->
        <div class="col-sm-4">
            <!--Clave Area-->
            <div class="form-group">
                <label for="usr">Area:</label>
                <input type="text" class="form-control" id="txtArea">
            </div>

            <!--Estrategia-->
            <div class="form-group">
                <label for="usr">Estrategia:</label>
                <input type="text" class="form-control" id="txtEstrategia">
            </div>

            <!--Jerarquia-->
            <div class="form-group">
                <label for="usr">Jerarquia:</label>
                <select id="ddlJerarquia" class="js-example-basic-multiple" data-width="100%">
                    <option value="10">GERENTE</option>
                    <option value="14">PROMOTOR</option>
                </select>
            </div>
        </div>
    </div>

    <div class="row">
        <input id="btnBuscar" type="button" onclick="Guardar()" class="btn btn-primary" value="Guardar" />
    </div>
</div>
<script>

    $(function () {
        var urlSave = '@Url.Action("CargarPersonas","Persona")';
        var _parametro = "";
        $.ajax({
            type: "POST",
            url: urlSave,
            dataType: "json",
            data: JSON.stringify({ parametro: _parametro }),
            success: function (personas) {
                $.each(personas, function (i, persona) {
                    $("#dllPromotores").append('<option value="' + persona.Value + '">' + persona.Text + '</option>');
                });
            },
            error: function (ex) {
                alert('Error');
            }
        });

    });

    $(".js-example-basic-multiple").select2({
        placeholder: "Promotor"
    });

    function Guardar()
    {
        //alert("Guardar");
        var urlSave = '@Url.Action("GuardarPersona","Persona")';
        var _usuario = $("#txtUsuario").val();
        var _contrasena = $("#txtContasena").val();
        var _nombre = $("#txtNombre").val();
        var _aPaterno = $("#txtAPaterno").val();
        var _aMaterno = ("#txtAMaterno").val();
        var _fechaNacimiento = $("#txtFechaNacimiento").val();
        var _rfc = $("#txtRFC").val();
        var _matricula = $("#txtClavePromotor");
        var _idGerentePromotor = $("#dllPromotores").val();
        var _area = $("#txtArea").val();
        var _estrategia = $("#txtEstrategia").val();
        var _idJerarquia = $("#ddlJerarquia").val();
        $.ajax({
            type: "POST",
            url: urlSave,
            data: JSON.stringify({
                idJerarquia: _idJerarquia, usuario: _usuario, contrasena: _contrasena,
                nombre: _nombre, aPaterno: _aPaterno, aMaterno: _aMaterno, fechaNacimiento: _fechaNacimiento, rfc: _rfc,
                matricula: _matricula, idGerentePromotor: _idGerentePromotor, area: _area, estrategia: _estrategia,
                activo: 1,
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        });
        alert("Persona registrada");
    }
</script>
